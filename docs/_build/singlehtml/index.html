<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Wavetrace documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="None" href="index.html#document-index" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="wavetrace-version-documentation">
<h1>Wavetrace 4.0 documentation<a class="headerlink" href="#wavetrace-version-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-introduction"></span><div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Wavetrace is a Python 3.5 package designed to produce radio signal coverage reports, such as GeoTIFF files of signal strength contours,</p>
<a class="reference internal image-reference" href="_images/signal_strength_contours.png"><img alt="_images/signal_strength_contours.png" class="align-left" src="_images/signal_strength_contours.png" style="width: 350px;" /></a>
<a class="reference internal image-reference" href="_images/legend.png"><img alt="_images/legend.png" src="_images/legend.png" style="height: 350px;" /></a>
<p>given radio transmitter data and topography data around the transmitters.
It uses <a class="reference external" href="http://www.qsl.net/kd2bd/splat.html">SPLAT!</a> to predict the attenuation of radio signals, which implements a <a class="reference external" href="https://en.wikipedia.org/wiki/Longley%E2%80%93Rice_model">Longley-Rice model</a>.</p>
<p>Wavetrace can also compute line-of-site maps for geostationary satellites:</p>
<a class="reference internal image-reference" href="_images/S36E173_satellite_los.png"><img alt="_images/S36E173_satellite_los.png" class="align-center" src="_images/S36E173_satellite_los.png" style="width: 300px;" /></a>
<p>Wavetrace is intended for use in New Zealand but can be configured to work elsewhere on Earth.</p>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Install SPLAT! &gt;= 1.4.0, GDAL &gt;= 1.11, and ImageMagick. For example, to install these on a Linux system do <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">update;</span> <span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">splat</span> <span class="pre">gdal-bin</span> <span class="pre">python-gdal</span> <span class="pre">imagemagick</span></code></li>
<li>Create a Python 3.5 virtual environment</li>
<li>In your virtual environment, install Wavetrace via Pip via <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">wavetrace</span></code></li>
</ol>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>Here is a common workflow for computing radio signal coverage reports for terrestrial transmitters.</p>
<ol class="arabic simple">
<li>Create a CSV file containing transmitter data; see <code class="docutils literal"><span class="pre">tests/data/transmitters.csv</span></code></li>
<li>Process the transmitter data into SPLAT! files via the function <code class="docutils literal"><span class="pre">wavetrace.main.process_transmitters</span></code></li>
<li>Download topography data around the transmitters via the functions <code class="docutils literal"><span class="pre">wavetrace.main.compute_tiles</span></code> and <code class="docutils literal"><span class="pre">wavetrace.main.download_topography</span></code>.  Topography data comes in two flavors: SRTM3 (standard definition; 3 arc second resolution; roughly 66 meters at 45 degrees south latitude) or SRTM1 (high definition; 1 arc second resolution; roughly 22 meters at 45 degrees south latitude). SPLAT! can only handle those two formats.</li>
<li>Process the topography data into SPLAT! files via the function <code class="docutils literal"><span class="pre">wavetrace.main.process_topography</span></code></li>
<li>Compute signal coverage reports, which include GeoTIFF signal strength contour maps, from the processed transmitter and topography data via the function <code class="docutils literal"><span class="pre">wavetrace.main.compute_coverage</span></code></li>
</ol>
<p>See the IPython notebook <code class="docutils literal"><span class="pre">ipynb/examples.ipynb</span></code> for a detailed example.</p>
<p>Additionally, you can call the most useful functions in the module <code class="docutils literal"><span class="pre">wavetrace.main</span></code> through Wavey, a command line interface for Wavetrace implemented in the module <code class="docutils literal"><span class="pre">wavetrace.cli</span></code>.</p>
</div>
<div class="section" id="further-reading">
<h3>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://www.qsl.net/kd2bd/splat.pdf">SPLAT! documentation</a></li>
<li><a class="reference external" href="https://wiki.openstreetmap.org/wiki/SRTM">Open Street Map wiki page on SRTM data</a></li>
</ul>
</div>
<div class="section" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Chris Guest (2013-06)</li>
<li>Alex Raichev (2016-08)</li>
</ul>
</div>
</div>
<span id="document-package"></span><div class="section" id="wavetrace-package">
<h2>wavetrace Package<a class="headerlink" href="#wavetrace-package" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">wavetrace</span></code> package contains four modules that depend on each other like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">main</span> <span class="o">-&gt;</span> <span class="n">constants</span><span class="p">,</span> <span class="n">utilities</span>
<span class="n">utilities</span> <span class="o">-&gt;</span> <span class="n">constants</span>
<span class="n">cli</span> <span class="o">-&gt;</span> <span class="n">main</span><span class="p">,</span> <span class="n">utilities</span><span class="p">,</span> <span class="n">constants</span>
</pre></div>
</div>
<div class="section" id="module-wavetrace.main">
<span id="main-module"></span><h3>main Module<a class="headerlink" href="#module-wavetrace.main" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>CONVENTIONS:</dt>
<dd><ul class="first last simple">
<li>All longitudes and latitudes below are referenced to the WGS84 ellipsoid, unless stated otherwise</li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="wavetrace.main.build_splat_az">
<code class="descclassname">wavetrace.main.</code><code class="descname">build_splat_az</code><span class="sig-paren">(</span><em>transmitter</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.build_splat_az" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the text (string) content of a SPLAT! azimuth file (AZ file) corresponding to the given transmitter.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">transmitter</span></code>: dictionary of the same form as any one of the elements in the list output by <a class="reference internal" href="#wavetrace.main.read_transmitters" title="wavetrace.main.read_transmitters"><code class="xref py py-func docutils literal"><span class="pre">read_transmitters()</span></code></a></li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>String</dd>
<dt>NOTES:</dt>
<dd>A transmitter with no <code class="docutils literal"><span class="pre">'bearing'</span></code> or <code class="docutils literal"><span class="pre">'horizontal_beamwidth'</span></code> data will produce the string <code class="docutils literal"><span class="pre">'0</span>&nbsp; <span class="pre">0'</span></code>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.build_splat_el">
<code class="descclassname">wavetrace.main.</code><code class="descname">build_splat_el</code><span class="sig-paren">(</span><em>transmitter</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.build_splat_el" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the text (string) content of a SPLAT! elevation file (EL file) corresponding to the given transmitter.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">transmitter</span></code>: dictionary of the same form as any one of the elements in the list output by <a class="reference internal" href="#wavetrace.main.read_transmitters" title="wavetrace.main.read_transmitters"><code class="xref py py-func docutils literal"><span class="pre">read_transmitters()</span></code></a></li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>String</dd>
<dt>NOTES:</dt>
<dd>A transmitter with no <code class="docutils literal"><span class="pre">'bearing'</span></code> or <code class="docutils literal"><span class="pre">'antenna_downtilt'</span></code> or <code class="docutils literal"><span class="pre">'vertical_beamwidth'</span></code> data will produce the string <code class="docutils literal"><span class="pre">'0</span>&nbsp; <span class="pre">0'</span></code>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.build_splat_lrp">
<code class="descclassname">wavetrace.main.</code><code class="descname">build_splat_lrp</code><span class="sig-paren">(</span><em>transmitter</em>, <em>earth_dielectric_constant=15</em>, <em>earth_conductivity=0.005</em>, <em>radio_climate=6</em>, <em>fraction_of_time=0.5</em>, <em>fraction_of_situations=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.build_splat_lrp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the text (string) content of a SPLAT! irregular topography model parameter file (LRP file) corresponding to the given transmitter.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">transmitter</span></code>: dictionary of the same form as any one of the elements in the list output by <a class="reference internal" href="#wavetrace.main.read_transmitters" title="wavetrace.main.read_transmitters"><code class="xref py py-func docutils literal"><span class="pre">read_transmitters()</span></code></a></li>
<li><code class="docutils literal"><span class="pre">earth_dielectric_constant</span></code>: float</li>
<li><code class="docutils literal"><span class="pre">earth_conductivity</span></code>: float</li>
<li><code class="docutils literal"><span class="pre">radio_climate</span></code>: integer</li>
<li><code class="docutils literal"><span class="pre">fraction_of_time</span></code>: float in [0, 1]</li>
<li><code class="docutils literal"><span class="pre">fraction_of_situations</span></code>: float in [0, 1]</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>String</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.build_splat_qth">
<code class="descclassname">wavetrace.main.</code><code class="descname">build_splat_qth</code><span class="sig-paren">(</span><em>transmitter</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.build_splat_qth" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the text content of a SPLAT! site location file 
(QTH file) corresponding to the given transmitter.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">transmitter</span></code>: dictionary of the same form as any one of the elements in the list output by <a class="reference internal" href="#wavetrace.main.read_transmitters" title="wavetrace.main.read_transmitters"><code class="xref py py-func docutils literal"><span class="pre">read_transmitters()</span></code></a></li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>String.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.build_transmitter_name">
<code class="descclassname">wavetrace.main.</code><code class="descname">build_transmitter_name</code><span class="sig-paren">(</span><em>network_name</em>, <em>site_name</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.build_transmitter_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string that is the network name with spaces removed followed 
by an underscore followed by the site name with spaces removed.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">build_transmitter_name</span><span class="p">(</span><span class="s1">&#39;Slap hAppy&#39;</span><span class="p">,</span> <span class="s1">&#39;Go go &#39;</span><span class="p">)</span>
<span class="go">&#39;SlaphAppy_Gogo&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.check_and_format_transmitters">
<code class="descclassname">wavetrace.main.</code><code class="descname">check_and_format_transmitters</code><span class="sig-paren">(</span><em>transmitters</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.check_and_format_transmitters" title="Permalink to this definition">¶</a></dt>
<dd><p>Check and format the given list of transmitter dictionaries.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">transmitters</span></code>: list; same format as output of <a class="reference internal" href="#wavetrace.main.read_transmitters" title="wavetrace.main.read_transmitters"><code class="xref py py-func docutils literal"><span class="pre">read_transmitters()</span></code></a></li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd><p class="first">The given list of transmitters dictionaries altered as follows.
For each dictionary,</p>
<ul class="last simple">
<li>create a <code class="docutils literal"><span class="pre">name</span></code> field from the <code class="docutils literal"><span class="pre">network_name</span></code> and <code class="docutils literal"><span class="pre">site_name</span></code> fields</li>
<li>convert the numerical fields to floats</li>
</ul>
</dd>
<dt>NOTES:</dt>
<dd>Raises a <code class="docutils literal"><span class="pre">ValueError</span></code> if the list of transmitters is empty, or if the <code class="docutils literal"><span class="pre">REQUIRED_TRANSMITTER_FIELDS</span></code> are not present in each transmitter dictionary, or if the any of the field data is improperly formatted.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.compute_coverage">
<code class="descclassname">wavetrace.main.</code><code class="descname">compute_coverage</code><span class="sig-paren">(</span><em>in_path</em>, <em>out_path</em>, <em>transmitters=None</em>, <em>receiver_sensitivity=-110</em>, <em>keep_ppm=False</em>, <em>high_definition=False</em>, <em>make_shp=False</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.compute_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce coverage reports by running <a class="reference internal" href="#wavetrace.main.compute_coverage_0" title="wavetrace.main.compute_coverage_0"><code class="xref py py-func docutils literal"><span class="pre">compute_coverage_0()</span></code></a> and then run <code class="xref py py-func docutils literal"><span class="pre">post_process_coverage_0()</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.compute_coverage_0">
<code class="descclassname">wavetrace.main.</code><code class="descname">compute_coverage_0</code><span class="sig-paren">(</span><em>in_path</em>, <em>out_path</em>, <em>transmitters=None</em>, <em>receiver_sensitivity=-110</em>, <em>high_definition=False</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.compute_coverage_0" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SPLAT! coverage report for every transmitter with data located at <code class="docutils literal"><span class="pre">in_path</span></code>, or if <code class="docutils literal"><span class="pre">transmitters</span></code> is given, then every transmitter 
in that list with data data located at <code class="docutils literal"><span class="pre">in_path</span></code>.
Write each report to the directory <code class="docutils literal"><span class="pre">out_path</span></code>, creating the directory   if necessary.
A report comprises the files</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'&lt;transmitter</span> <span class="pre">name&gt;-site_report.txt'</span></code></li>
<li><code class="docutils literal"><span class="pre">'&lt;transmitter</span> <span class="pre">name&gt;.kml'</span></code>: KML file containing transmitter feature and <code class="docutils literal"><span class="pre">'&lt;transmitter</span> <span class="pre">name&gt;.ppm'</span></code></li>
<li><code class="docutils literal"><span class="pre">'&lt;transmitter</span> <span class="pre">name&gt;.ppm'</span></code>: PPM file depicting a contour plot of the transmitter signal strength</li>
<li><code class="docutils literal"><span class="pre">'&lt;transmitter</span> <span class="pre">name&gt;-ck.ppm'</span></code>: PPM file depicting a legend for the signal strengths in <code class="docutils literal"><span class="pre">'&lt;transmitter</span> <span class="pre">name&gt;.ppm'</span></code></li>
</ul>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">in_path</span></code>: string or Path object specifying a directory; all the SPLAT! transmitter and elevation data should lie here</li>
<li><code class="docutils literal"><span class="pre">out_path</span></code>: string or Path object specifying a directory</li>
<li><code class="docutils literal"><span class="pre">transmitters</span></code>: list of transmitter dictionaries (in the form output by <a class="reference internal" href="#wavetrace.main.read_transmitters" title="wavetrace.main.read_transmitters"><code class="xref py py-func docutils literal"><span class="pre">read_transmitters()</span></code></a>) to restrict to; if <code class="docutils literal"><span class="pre">None</span></code>, then all transmitters in <code class="docutils literal"><span class="pre">in_path</span></code> will be used</li>
<li><code class="docutils literal"><span class="pre">receiver_sensitivity</span></code>: float; measured in decibels; path loss threshold beyond which signal strength contours will not be plotted</li>
<li><code class="docutils literal"><span class="pre">high_definition</span></code>: boolean</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>None.</dd>
<dt>NOTES:</dt>
<dd><ul class="first last simple">
<li>Calls SPLAT!&#8217;s <code class="docutils literal"><span class="pre">splat</span></code> or <code class="docutils literal"><span class="pre">splat-hd</span></code> (if <code class="docutils literal"><span class="pre">high_definition</span></code>) to do the work</li>
<li>Raises a <code class="docutils literal"><span class="pre">subprocess.CalledProcessError</span></code> if SPLAT! fails</li>
<li>This is a time-intensive function. On a 3.6 GHz Intel Core i7 processor with 16 GB of RAM, this takes about 32 minutes for the 20 New Zealand test transmitters (in <code class="docutils literal"><span class="pre">tests/data/transmitters.csv</span></code>) with their 13 standard definition topography files and takes about 687 minutes for the same 20 transmitters with their 13 high definition topography files.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.compute_look_angles">
<code class="descclassname">wavetrace.main.</code><code class="descname">compute_look_angles</code><span class="sig-paren">(</span><em>lon</em>, <em>lat</em>, <em>height</em>, <em>satellite_lon</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.compute_look_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the longitude, latitude, and height in meters of a point P on Earth and given the longitude of a geostationary satellite S, return the azimuth and elevation in degrees of S relative to P, respectively.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">lon</span></code>: float; longitude of P</li>
<li><code class="docutils literal"><span class="pre">lat`</span></code>: float; latitude of P</li>
<li><code class="docutils literal"><span class="pre">height</span></code>: float; distance in meters between P and the WGS84 ellipsoid; GPS height</li>
<li><code class="docutils literal"><span class="pre">satellite_lon</span></code>: float; longitude of S</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">azimuth</span></code>: float; degrees in [0, 360)</li>
<li><code class="docutils literal"><span class="pre">elevation</span></code>: float; degrees in [-90, 90]; a negative value indicates that S lies below the local horizon of P</li>
</ul>
</dd>
</dl>
<p>NOTES:</p>
<ul class="simple">
<li>Algorithm taken from <a class="reference external" href="https://www.ngs.noaa.gov/CORS/Articles/SolerEisemannJSE.pdf">Determination of look angles to geostationary communication satellites</a> by Tomas Soler David W. Eisemann</li>
<li>The input <code class="docutils literal"><span class="pre">height</span></code> is the sum of H and N, where H is the SRTM elevation of P (the orthometric height; see the <a class="reference external" href="https://lpdaac.usgs.gov/sites/default/files/public/measures/docs/NASA_SRTM_V3.pdf">SRTM collection user guide</a>) and N is the height of the EGM96 geoid above the WGS84 ellipsoid at P (the geoid height).</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.compute_satellite_los">
<code class="descclassname">wavetrace.main.</code><code class="descname">compute_satellite_los</code><span class="sig-paren">(</span><em>in_path</em>, <em>satellite_lon</em>, <em>out_path</em>, <em>n=3</em>, <em>make_shp=False</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.compute_satellite_los" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the path <code class="docutils literal"><span class="pre">in_path</span></code> to an SRTM1 or SRTM3 file and the longitude of a geostationary satellite, color with 8-bits of grayscale (pixel values from 0 to 255) the raster cells according to whether they are out (blackish, close to 0) or in (whitish, close to 255) of the line-of-site of the satellite, and save the result as a GeoTIFF file located at <code class="docutils literal"><span class="pre">out_path</span></code>.
If <code class="docutils literal"><span class="pre">make_shp</span></code>, then also create an ESRI Shapefile bundle (.dbf, .prj, .shp, and .shx files) out of the GeoTIFF and save it to a similar path (same path stem but with Shapefile path suffixes).</p>
<dl class="docutils">
<dt>ALGORITHM: </dt>
<dd><ol class="first last arabic simple">
<li>Partition the SRTM tile into <code class="docutils literal"><span class="pre">n**2</span></code> square subtiles or roughly the same size</li>
<li>For each subtile, compute the longitude, latitude, and (WGS84) height of its center</li>
<li>Compute the the look angles of the satellite from the center</li>
<li>Use the look angles to shade the subtile via GDAL&#8217;s <code class="docutils literal"><span class="pre">gdaldem</span> <span class="pre">hillshade</span></code> command</li>
<li>Merge the subtiles and save the result as a GeoTIFF file</li>
</ol>
</dd>
<dt>NOTES:</dt>
<dd><ul class="first last simple">
<li>Calls <a class="reference internal" href="#wavetrace.main.get_geoid_height" title="wavetrace.main.get_geoid_height"><code class="xref py py-func docutils literal"><span class="pre">get_geoid_height()</span></code></a> <code class="docutils literal"><span class="pre">n**2</span></code> times. Because that function is currently implemented as an HTTP GET request, that slows things down and also introduces <code class="docutils literal"><span class="pre">n**2</span></code> opportunities for failure (raising a <code class="docutils literal"><span class="pre">ValueError</span></code>).</li>
<li>To roughly interpret the output raster values as actual satellite signal strengths, one would need to obtain some actual on-the-ground satellite readings.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.download_topography">
<code class="descclassname">wavetrace.main.</code><code class="descname">download_topography</code><span class="sig-paren">(</span><em>tile_ids</em>, <em>path</em>, <em>high_definition=False</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.download_topography" title="Permalink to this definition">¶</a></dt>
<dd><p>Download from the public Gitlab repository <a class="reference external" href="https://gitlab.com/araichev/srtm_nz">https://gitlab.com/araichev/srtm_nz</a> the SRTM1 or SRTM3 topography data corresponding to the given SRTM tile IDs and save the files to the directory <code class="docutils literal"><span class="pre">path</span></code>, creating the directory if it does not exist.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">tile_ids</span></code>: list of strings; SRTM tile IDs</li>
<li><code class="docutils literal"><span class="pre">path</span></code>: string or Path object specifying a directory</li>
<li><code class="docutils literal"><span class="pre">high_definition</span></code>: boolean; if <code class="docutils literal"><span class="pre">True</span></code> then download SRTM1 tiles; otherwise download SRTM3 tiles</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>None</dd>
<dt>NOTES:</dt>
<dd>Only works for SRTM tiles covering New Zealand and raises a <code class="docutils literal"><span class="pre">ValueError</span></code> if the set of tile IDs is not a subset of <code class="xref py py-data docutils literal"><span class="pre">SRTM_NZ_TILE_IDS</span></code></dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.get_bounds_from_kml">
<code class="descclassname">wavetrace.main.</code><code class="descname">get_bounds_from_kml</code><span class="sig-paren">(</span><em>kml_string</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.get_bounds_from_kml" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the text content of a SPLAT! KML coverage file, return a list of floats of the form <code class="docutils literal"><span class="pre">[min_lon,</span> <span class="pre">min_lat,</span> <span class="pre">max_lon,</span> <span class="pre">max_lat]</span></code> which describes the longitude-latitude bounding box of the coverage file.
Raise an <code class="docutils literal"><span class="pre">AttributeError</span></code> if the KML does not contain a <code class="docutils literal"><span class="pre">&lt;LatLonBox&gt;</span></code>  entry and hence is not a well-formed SPLAT! KML coverage file.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.get_covering_tiles_ids">
<code class="descclassname">wavetrace.main.</code><code class="descname">get_covering_tiles_ids</code><span class="sig-paren">(</span><em>transmitters, transmitter_buffer=0.5, tile_ids=['S35E172', 'S35E173', 'S36E173', 'S36E174', 'S36E175', 'S37E173', 'S37E174', 'S37E175', 'S37E176', 'S38E174', 'S38E175', 'S38E176', 'S38E177', 'S38E178', 'S39E174', 'S39E175', 'S39E176', 'S39E177', 'S39E178', 'S40E173', 'S40E174', 'S40E175', 'S40E176', 'S40E177', 'S40E178', 'S41E172', 'S41E173', 'S41E174', 'S41E175', 'S41E176', 'S42E171', 'S42E172', 'S42E173', 'S42E174', 'S42E175', 'S42E176', 'S43E170', 'S43E171', 'S43E172', 'S43E173', 'S43E174', 'S44E168', 'S44E169', 'S44E170', 'S44E171', 'S44E172', 'S44E173', 'S45E167', 'S45E168', 'S45E169', 'S45E170', 'S45E171', 'S46E166', 'S46E167', 'S46E168', 'S46E169', 'S46E170', 'S46E171', 'S47E166', 'S47E167', 'S47E168', 'S47E169', 'S47E170', 'S48E167', 'S48E168']</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.get_covering_tiles_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of transmitters (of the form output by <a class="reference internal" href="#wavetrace.main.read_transmitters" title="wavetrace.main.read_transmitters"><code class="xref py py-func docutils literal"><span class="pre">read_transmitters()</span></code></a>), get their locations, buffer them by <code class="docutils literal"><span class="pre">transmitter_buffer</span></code> decimal degrees, and return an ordered list of the unique SRTM tile IDs in <code class="docutils literal"><span class="pre">tile_ids</span></code> whose corresponding tiles intersect the buffers.
As long as <code class="docutils literal"><span class="pre">tile_ids</span></code> and <code class="docutils literal"><span class="pre">transmitter_buffer</span></code> are big enough, the result will be a list of tile IDs to use when computing coverage for the given transmitters.
The defaults are appropriate for transmitters in New Zealand.</p>
<dl class="docutils">
<dt>NOTES:</dt>
<dd><ul class="first last simple">
<li>Regarding the transmitter buffer, one degree of latitude represents about 111 km on the ground and one degree of longitude at -45 degrees latitude represents about 78 km on the ground; see <a class="reference external" href="https://en.wikipedia.org/wiki/Decimal_degrees">https://en.wikipedia.org/wiki/Decimal_degrees</a></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.get_geoid_height">
<code class="descclassname">wavetrace.main.</code><code class="descname">get_geoid_height</code><span class="sig-paren">(</span><em>lon</em>, <em>lat</em>, <em>num_tries=3</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.get_geoid_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Query <a class="reference external" href="https://geographiclib.sourceforge.io/cgi-bin/GeoidEval">https://geographiclib.sourceforge.io/cgi-bin/GeoidEval</a> for the height in meters of the EGM96 geoid above the WGS84 ellipsoid for the given longitude and latitude. 
If the result is negative, then the geoid lies below the ellipsoid.
Raise a <code class="docutils literal"><span class="pre">ValueError</span></code> if the query fails after <code class="docutils literal"><span class="pre">num_tries</span></code> tries.</p>
<dl class="docutils">
<dt>NOTES:</dt>
<dd><ul class="first last simple">
<li>It would be good to rewrite this function so that it does not depend on internet access. For starters, see <a class="reference external" href="https://github.com/vandry/geoidheight">https://github.com/vandry/geoidheight</a>, which uses the EGM2008 ellipsoid.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.get_lonlats">
<code class="descclassname">wavetrace.main.</code><code class="descname">get_lonlats</code><span class="sig-paren">(</span><em>transmitters</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.get_lonlats" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of longitude-latitude pairs (float pairs) representing the locations of the given transmitters.
If <code class="docutils literal"><span class="pre">transmitters</span></code> is empty, then return the empty list.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">transmitters</span></code>: a list of transmitters of the form output by <a class="reference internal" href="#wavetrace.main.read_transmitters" title="wavetrace.main.read_transmitters"><code class="xref py py-func docutils literal"><span class="pre">read_transmitters()</span></code></a></li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>String</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.partition">
<code class="descclassname">wavetrace.main.</code><code class="descname">partition</code><span class="sig-paren">(</span><em>width</em>, <em>height</em>, <em>n=3</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the pixel width and pixel height of a rectangular image and an integer <code class="docutils literal"><span class="pre">n</span></code>, partition the rectangle into <code class="docutils literal"><span class="pre">n**2</span></code> subrectangles, each of roughly the same sizes.
Return a list of the subrectangle offsets and sizes for easy use with  GDAL&#8217;s <code class="docutils literal"><span class="pre">gdal_translate</span> <span class="pre">-srcwin</span></code> option.
Each list item has the form (x-offset, y-offset, x-size, y-size) and the items/subrectangles are ordered from left to right and then from top to bottom, e.g. for <code class="docutils literal"><span class="pre">n=3</span></code> the layout of the subrectangles looks like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-------------</span>
<span class="o">|</span> <span class="mi">0</span> <span class="o">|</span> <span class="mi">1</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">|</span>
<span class="o">-------------</span>
<span class="o">|</span> <span class="mi">3</span> <span class="o">|</span> <span class="mi">4</span> <span class="o">|</span> <span class="mi">5</span> <span class="o">|</span>
<span class="o">-------------</span>
<span class="o">|</span> <span class="mi">6</span> <span class="o">|</span> <span class="mi">7</span> <span class="o">|</span> <span class="mi">8</span> <span class="o">|</span>
<span class="o">-------------</span>
</pre></div>
</div>
<p>The subrectangles in the right-most column and those in the bottom-most row will be slightly wider and taller, respectively, than the other subrectangles in case <code class="docutils literal"><span class="pre">width</span></code> or <code class="docutils literal"><span class="pre">height</span></code> are not divisible by <code class="docutils literal"><span class="pre">n</span></code>, respectively.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.postprocess_coverage_0">
<code class="descclassname">wavetrace.main.</code><code class="descname">postprocess_coverage_0</code><span class="sig-paren">(</span><em>path</em>, <em>keep_ppm</em>, <em>make_shp</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.postprocess_coverage_0" title="Permalink to this definition">¶</a></dt>
<dd><p>Using the PPM files in the directory <code class="docutils literal"><span class="pre">path</span></code> do the following:</p>
<ul class="simple">
<li>Convert each PPM file into a PNG file, replacing white with transparency using ImageMagick</li>
<li>Change the PPM reference in each KML file to the corresponding PNG file</li>
<li>Convert the PNG coverage file (not the legend file) into GeoTIFF using GDAL</li>
<li>Optionally create ESRI Shapefile bundles (.dbf, .prj, .shp, and .shx files) from the GeoTIFF files</li>
</ul>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">path</span></code>: string or Path object; directory where coverage reports (outputs of <a class="reference internal" href="#wavetrace.main.compute_coverage" title="wavetrace.main.compute_coverage"><code class="xref py py-func docutils literal"><span class="pre">compute_coverage()</span></code></a>) lie</li>
<li><code class="docutils literal"><span class="pre">keep_ppm</span></code>: boolean; keep the original, large PPM files in the coverage reports if and only if this flag is <code class="docutils literal"><span class="pre">True</span></code></li>
<li><code class="docutils literal"><span class="pre">make_shp</span></code>: boolean; create ESRI Shapefiles from the GeoTIFF files if and only if this flag is <code class="docutils literal"><span class="pre">True</span></code></li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>None.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.process_topography">
<code class="descclassname">wavetrace.main.</code><code class="descname">process_topography</code><span class="sig-paren">(</span><em>in_path</em>, <em>out_path</em>, <em>high_definition=False</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.process_topography" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert each SRTM HGT topography file in the directory <code class="docutils literal"><span class="pre">in_path</span></code> to a SPLAT! Data File (SDF) file in the directory <code class="docutils literal"><span class="pre">out_path</span></code>,     creating the directory if it does not exist.
If <code class="docutils literal"><span class="pre">high_definition</span></code>, then assume the input data is high definition.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">in_path</span></code>: string or Path object specifying a directory</li>
<li><code class="docutils literal"><span class="pre">out_path</span></code>: string or Path object specifying a directory</li>
<li><code class="docutils literal"><span class="pre">high_definition</span></code>: boolean</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>None.</dd>
<dt>NOTES:</dt>
<dd><ul class="first last simple">
<li>Calls SPLAT!&#8217;s <code class="docutils literal"><span class="pre">srtm2sdf</span></code> or <code class="docutils literal"><span class="pre">srtm2sdf-hd</span></code> 
(if <code class="docutils literal"><span class="pre">high_definition</span></code>) command to do the work</li>
<li>Raises a <code class="docutils literal"><span class="pre">subprocess.CalledProcessError</span></code> if SPLAT! fails to 
convert a file</li>
<li>Each SRTM1 or SRTM3 file must have a name of the form &lt;SRTM tile ID&gt;[.something].hgt.zip or &lt;SRTM tile ID&gt;[.something].hgt, e.g. S36E173.SRTMGL3.hgt.zip</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.process_transmitters">
<code class="descclassname">wavetrace.main.</code><code class="descname">process_transmitters</code><span class="sig-paren">(</span><em>in_path</em>, <em>out_path</em>, <em>earth_dielectric_constant=15</em>, <em>earth_conductivity=0.005</em>, <em>radio_climate=6</em>, <em>fraction_of_time=0.5</em>, <em>fraction_of_situations=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.process_transmitters" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the CSV transmitter data at <code class="docutils literal"><span class="pre">in_path</span></code>, and for each transmitter, 
create the following SPLAT! data for it and save it to the directory
<code class="docutils literal"><span class="pre">out_path</span></code>:</p>
<ul class="simple">
<li>location data as a QTH file</li>
<li>irregular topography model parameter as an LRP file</li>
<li>azimuth data as an AZ file</li>
<li>elevation data as an EL file</li>
</ul>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">in_path</span></code>: string or Path object; location of a CSV file of transmitter data</li>
<li><code class="docutils literal"><span class="pre">out_path</span></code>: string or Path object; directory to which to write outputs</li>
<li><code class="docutils literal"><span class="pre">earth_dielectric_constant</span></code>: float; Earth dielectric constant; SPLAT! parameter used to make an LRP file</li>
<li><code class="docutils literal"><span class="pre">earth_conductivity</span></code>: float; Earth conductivity; SPLAT! parameter used to make an LRP file</li>
<li><code class="docutils literal"><span class="pre">radio_climate</span></code>: integer; SPLAT! parameter used to make an LRP file</li>
<li><code class="docutils literal"><span class="pre">fraction_of_time</span></code>: float in [0, 1]; SPLAT! parameter used to make an LRP file</li>
<li><code class="docutils literal"><span class="pre">fraction_of_situations</span></code>: float in [0, 1]; SPLAT! parameter used to make an LRP file</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>None.</dd>
<dt>NOTES:</dt>
<dd><p class="first">The CSV file of transmitter data must include at least the columns,
otherwise a <code class="docutils literal"><span class="pre">ValueError</span></code> will be raised.</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">'network_name'</span></code>: name of transmitter network</li>
<li><code class="docutils literal"><span class="pre">'site_name'</span></code>: name of transmitter site</li>
<li><code class="docutils literal"><span class="pre">'longitude'</span></code>: decimal longitude of transmitter</li>
<li><code class="docutils literal"><span class="pre">'latitude</span></code>: decimal latitude of transmitter</li>
<li><code class="docutils literal"><span class="pre">'antenna_height'</span></code>: height of transmitter antenna in meters above sea level</li>
<li><code class="docutils literal"><span class="pre">'polarization'</span></code>: 0 for horizontal or 1 for vertical</li>
<li><code class="docutils literal"><span class="pre">'frequency'</span></code>: frequency of transmitter in megaherz</li>
<li><code class="docutils literal"><span class="pre">'power_eirp'</span></code>: effective radiated power of transmitter in watts</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.main.read_transmitters">
<code class="descclassname">wavetrace.main.</code><code class="descname">read_transmitters</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.main.read_transmitters" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of dictionaries, one for each transmitter in the transmitters
CSV file.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">path</span></code>: string or Path object; location of a CSV file of transmitter data</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>List of dictionaries.
The keys for each transmitter come from the header row of the CSV file.
If <code class="docutils literal"><span class="pre">REQUIRED_TRANSMITTER_FIELDS</span></code> is not a subset of these keys, then
raise a <code class="docutils literal"><span class="pre">ValueError</span></code>.
Additionally, a &#8216;name&#8217; field is added to each transmitter dictionary for later use and is the result of <a class="reference internal" href="#wavetrace.main.build_transmitter_name" title="wavetrace.main.build_transmitter_name"><code class="xref py py-func docutils literal"><span class="pre">build_transmitter_name()</span></code></a>.</dd>
<dt>NOTES:</dt>
<dd>For the format of the transmitters CSV file, see the notes section of <code class="xref py py-func docutils literal"><span class="pre">create_splat_transmitters()</span></code>.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-wavetrace.utilities">
<span id="utilities-module"></span><h3>utilities Module<a class="headerlink" href="#module-wavetrace.utilities" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>CONVENTIONS:</dt>
<dd><ul class="first last simple">
<li>All longitudes and latitudes below are referenced to the WGS84 ellipsoid, unless stated otherwise</li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="wavetrace.utilities.build_feature">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">build_feature</code><span class="sig-paren">(</span><em>tile_id</em>, <em>be_precise=None</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.build_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an SRTM tile ID, a list of (decoded) GeoJSON Feature object corresponding to the WGS84 longitude-latitude boundary of the tile.
Use the same <code class="docutils literal"><span class="pre">be_precise</span></code> keyword as in <a class="reference internal" href="#wavetrace.utilities.get_bounds" title="wavetrace.utilities.get_bounds"><code class="xref py py-func docutils literal"><span class="pre">get_bounds()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.build_polygon">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">build_polygon</code><span class="sig-paren">(</span><em>tile_id</em>, <em>be_precise=None</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.build_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an SRTM tile ID, return a Shapely Polygon object corresponding to the longitude-latitude boundary of the tiles.
Use the same <code class="docutils literal"><span class="pre">be_precise</span></code> keyword as in <a class="reference internal" href="#wavetrace.utilities.get_bounds" title="wavetrace.utilities.get_bounds"><code class="xref py py-func docutils literal"><span class="pre">get_bounds()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.check_lonlat">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">check_lonlat</code><span class="sig-paren">(</span><em>lon</em>, <em>lat</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.check_lonlat" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a <code class="docutils literal"><span class="pre">ValueError</span></code> if <code class="docutils literal"><span class="pre">lon</span></code> and <code class="docutils literal"><span class="pre">lat</span></code> do not represent a valid 
longitude-latitude pair.
Otherwise, return nothing.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.check_tile_id">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">check_tile_id</code><span class="sig-paren">(</span><em>tile_id</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.check_tile_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a <code class="docutils literal"><span class="pre">ValueError</span></code> if the given SRTM tile ID (string) 
is improperly formatted.
Otherwise, return nothing.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.compute_intersecting_tiles">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">compute_intersecting_tiles</code><span class="sig-paren">(</span><em>geometries, tile_ids=['S35E172', 'S35E173', 'S36E173', 'S36E174', 'S36E175', 'S37E173', 'S37E174', 'S37E175', 'S37E176', 'S38E174', 'S38E175', 'S38E176', 'S38E177', 'S38E178', 'S39E174', 'S39E175', 'S39E176', 'S39E177', 'S39E178', 'S40E173', 'S40E174', 'S40E175', 'S40E176', 'S40E177', 'S40E178', 'S41E172', 'S41E173', 'S41E174', 'S41E175', 'S41E176', 'S42E171', 'S42E172', 'S42E173', 'S42E174', 'S42E175', 'S42E176', 'S43E170', 'S43E171', 'S43E172', 'S43E173', 'S43E174', 'S44E168', 'S44E169', 'S44E170', 'S44E171', 'S44E172', 'S44E173', 'S45E167', 'S45E168', 'S45E169', 'S45E170', 'S45E171', 'S46E166', 'S46E167', 'S46E168', 'S46E169', 'S46E170', 'S46E171', 'S47E166', 'S47E167', 'S47E168', 'S47E169', 'S47E170', 'S48E167', 'S48E168']</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.compute_intersecting_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of Shapely geometries in WGS84 coordinates, return an ordered list of the unique SRTM tile IDs in <code class="docutils literal"><span class="pre">tile_ids</span></code> whose corresponding tiles intersect the geometries.</p>
<dl class="docutils">
<dt>NOTES:</dt>
<dd><ul class="first last simple">
<li>Uses a simple double loop instead of a spatial index, so runs in O(num geometries * num tiles) time. That is fast enough for the 65 SRTM tiles that cover New Zealand. Could be fast enough for all SRTM tiles, but i never tried.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.gdalinfo">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">gdalinfo</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.gdalinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the path to an raster file, run <code class="docutils literal"><span class="pre">gdalinfo</span></code> on the file and extract and return from the result a dictionary with the following keys and values:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'width'</span></code>: pixel width of raster</li>
<li><code class="docutils literal"><span class="pre">'height'</span></code>: pixel height of raster</li>
<li><code class="docutils literal"><span class="pre">'center'</span></code>: center coordinates.</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.get_bounds">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">get_bounds</code><span class="sig-paren">(</span><em>tile_id</em>, <em>be_precise=None</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.get_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the bounding box for the given SRTM tile ID.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">tile_id</span></code>: string; ID of an SRTM tile</li>
<li><code class="docutils literal"><span class="pre">be_precise</span></code> (optional): string; &#8216;SRTM1&#8217; or &#8216;SRTM3&#8217;</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>List of integers of the form  <code class="docutils literal"><span class="pre">[min_lon,</span> <span class="pre">min_lat,</span> <span class="pre">max_lon,</span> <span class="pre">max_lat]</span></code>
representing the longitude-latitude bounding box of the tile.
This assumes that the tile is exactly 1 degree by 1 degree in dimension, which is not actually the case. 
If <code class="docutils literal"><span class="pre">be_precise</span></code> equals &#8216;SRTM1&#8217; or &#8216;SRTM3&#8217;, then return the precise bounds corresponding to the tile type; SRTM1 tiles are 1 degree and 1 arcsecond in side length; SRTM3 tiles are 1 degree and 3 arcseconds in side length.</dd>
</dl>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_bounds</span><span class="p">(</span><span class="s1">&#39;N04W027&#39;</span><span class="p">)</span>
<span class="go">[-27, 4, -26, 5]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_bounds</span><span class="p">(</span><span class="s1">&#39;N04W027&#39;</span><span class="p">,</span> <span class="n">be_precise</span><span class="o">=</span><span class="s1">&#39;SRTM1&#39;</span><span class="p">)</span>
<span class="go">[-27.000138888888888, 3.999861111111111, -25.999861111111112, 5.0001388888888885]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.get_covering_tile_id">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">get_covering_tile_id</code><span class="sig-paren">(</span><em>lon</em>, <em>lat</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.get_covering_tile_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ID of the SRTM tile that covers the given longitude and latitude.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">lon</span></code>: float; longitude</li>
<li><code class="docutils literal"><span class="pre">lat</span></code>: float; latitude</li>
</ul>
</dd>
<dt>OUTPUT:</dt>
<dd>SRTM tile ID (string)</dd>
</dl>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_covering_tile_id</span><span class="p">(</span><span class="mf">27.5</span><span class="p">,</span> <span class="mf">3.64</span><span class="p">)</span>
<span class="go">&#39;N03E027&#39;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>NOTES:</dt>
<dd>SRTM data for an output tile might not actually exist, e.g. data for the tile N90E000 does not exist in NASA&#8217;s database.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.get_tile_id">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">get_tile_id</code><span class="sig-paren">(</span><em>tile_path</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.get_tile_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the path to an SRTM1 or SRTM3 tile, return the ID of the tile (a string), e.g. &#8220;S36E174&#8221; for the path &#8220;bingo/S36E174.SRTMGL1.hgt.zip&#8221;
Assume that the tile ID is the first part of the file name, as is the SRTM convention.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.rm_paths">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">rm_paths</code><span class="sig-paren">(</span><em>*paths</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.rm_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the given file paths/directory paths, if they exists.</p>
</dd></dl>

<dl class="function">
<dt id="wavetrace.utilities.time_it">
<code class="descclassname">wavetrace.utilities.</code><code class="descname">time_it</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#wavetrace.utilities.time_it" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorate function <code class="docutils literal"><span class="pre">f</span></code> to measure and print elapsed time when executed.</p>
</dd></dl>

</div>
<div class="section" id="module-wavetrace.constants">
<span id="constants-module"></span><h3>constants Module<a class="headerlink" href="#module-wavetrace.constants" title="Permalink to this headline">¶</a></h3>
<dl class="data">
<dt id="wavetrace.constants.EARTH_CONDUCTIVITY">
<code class="descclassname">wavetrace.constants.</code><code class="descname">EARTH_CONDUCTIVITY</code><em class="property"> = 0.005</em><a class="headerlink" href="#wavetrace.constants.EARTH_CONDUCTIVITY" title="Permalink to this definition">¶</a></dt>
<dd><p>SPLAT! Earth earth_conductivity in Siemens per meter</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.EARTH_DIELECTRIC_CONSTANT">
<code class="descclassname">wavetrace.constants.</code><code class="descname">EARTH_DIELECTRIC_CONSTANT</code><em class="property"> = 15</em><a class="headerlink" href="#wavetrace.constants.EARTH_DIELECTRIC_CONSTANT" title="Permalink to this definition">¶</a></dt>
<dd><p>SPLAT! Earth dielectric constant.
According to the SPLAT! documentation, typical Earth dielectric constants and conductivities are:
Salt water, 80, 5.000;
Good ground, 25, 0.020;
Fresh water, 80, 0.010;
Marshy land, 12, 0.007;
Farmland or forest, 15, 0.005;
Average ground, 15, 0.005;
Mountain or sand, 13, 0.002;
City, 5, 0.001;
Poor ground, 4, 0.001;</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.FRACTION_OF_SITUATIONS">
<code class="descclassname">wavetrace.constants.</code><code class="descname">FRACTION_OF_SITUATIONS</code><em class="property"> = 0.5</em><a class="headerlink" href="#wavetrace.constants.FRACTION_OF_SITUATIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>SPLAT! location variability parameter</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.FRACTION_OF_TIME">
<code class="descclassname">wavetrace.constants.</code><code class="descname">FRACTION_OF_TIME</code><em class="property"> = 0.5</em><a class="headerlink" href="#wavetrace.constants.FRACTION_OF_TIME" title="Permalink to this definition">¶</a></dt>
<dd><p>SPLAT! time variability parameter</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.H_S">
<code class="descclassname">wavetrace.constants.</code><code class="descname">H_S</code><em class="property"> = 35785863</em><a class="headerlink" href="#wavetrace.constants.H_S" title="Permalink to this definition">¶</a></dt>
<dd><p>Distance in meters of a geostationary satellite from the WGS84 ellipsoid</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.RADIO_CLIMATE">
<code class="descclassname">wavetrace.constants.</code><code class="descname">RADIO_CLIMATE</code><em class="property"> = 6</em><a class="headerlink" href="#wavetrace.constants.RADIO_CLIMATE" title="Permalink to this definition">¶</a></dt>
<dd><p>SPLAT! radio climate codes.
1=Equatorial (Congo);
2=Continental Subtropical (Sudan);
3=Maritime Subtropical (West coast of Africa);
4=Desert (Sahara);
5=Continental Temperate;
6=Maritime Temperate, over land (UK and west coasts of US &amp; EU);
7=Maritime Temperate, over sea</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.RECEIVER_SENSITIVITY">
<code class="descclassname">wavetrace.constants.</code><code class="descname">RECEIVER_SENSITIVITY</code><em class="property"> = -110</em><a class="headerlink" href="#wavetrace.constants.RECEIVER_SENSITIVITY" title="Permalink to this definition">¶</a></dt>
<dd><p>SPLAT receiver sensitivity parameter in decibel-milliwatts (dBm).
For example, minimum received signal power of wireless networks (802.11 variants) is -100 dBm.</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.REQUIRED_TRANSMITTER_FIELDS">
<code class="descclassname">wavetrace.constants.</code><code class="descname">REQUIRED_TRANSMITTER_FIELDS</code><em class="property"> = ['network_name', 'site_name', 'latitude', 'longitude', 'antenna_height', 'polarization', 'frequency', 'power_eirp']</em><a class="headerlink" href="#wavetrace.constants.REQUIRED_TRANSMITTER_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd><p>Transmitter CSV files must have these header columns</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.R_S">
<code class="descclassname">wavetrace.constants.</code><code class="descname">R_S</code><em class="property"> = 42164000</em><a class="headerlink" href="#wavetrace.constants.R_S" title="Permalink to this definition">¶</a></dt>
<dd><p>Distance in meters of a geostationary satellite from the center of the Earth (and hence the center of the WGS84 ellipsoid);
taken from the Wikipedia article <a class="reference external" href="https://en.wikipedia.org/wiki/Geostationary_orbit">Geostationary orbit</a></p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.SRTM_NZ_TILE_IDS">
<code class="descclassname">wavetrace.constants.</code><code class="descname">SRTM_NZ_TILE_IDS</code><em class="property"> = ['S35E172', 'S35E173', 'S36E173', 'S36E174', 'S36E175', 'S37E173', 'S37E174', 'S37E175', 'S37E176', 'S38E174', 'S38E175', 'S38E176', 'S38E177', 'S38E178', 'S39E174', 'S39E175', 'S39E176', 'S39E177', 'S39E178', 'S40E173', 'S40E174', 'S40E175', 'S40E176', 'S40E177', 'S40E178', 'S41E172', 'S41E173', 'S41E174', 'S41E175', 'S41E176', 'S42E171', 'S42E172', 'S42E173', 'S42E174', 'S42E175', 'S42E176', 'S43E170', 'S43E171', 'S43E172', 'S43E173', 'S43E174', 'S44E168', 'S44E169', 'S44E170', 'S44E171', 'S44E172', 'S44E173', 'S45E167', 'S45E168', 'S45E169', 'S45E170', 'S45E171', 'S46E166', 'S46E167', 'S46E168', 'S46E169', 'S46E170', 'S46E171', 'S47E166', 'S47E167', 'S47E168', 'S47E169', 'S47E170', 'S48E167', 'S48E168']</em><a class="headerlink" href="#wavetrace.constants.SRTM_NZ_TILE_IDS" title="Permalink to this definition">¶</a></dt>
<dd><p>SRTM tiles that cover New Zealand; for a visual, see <a class="reference external" href="http://geojson.io/#id=gist:anonymous/81b4cb465f1c78941f665c9038494f0f&amp;map=5/-41.360/172.463">http://geojson.io/#id=gist:anonymous/81b4cb465f1c78941f665c9038494f0f&amp;map=5/-41.360/172.463</a></p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.WGS84_A">
<code class="descclassname">wavetrace.constants.</code><code class="descname">WGS84_A</code><em class="property"> = 6378137</em><a class="headerlink" href="#wavetrace.constants.WGS84_A" title="Permalink to this definition">¶</a></dt>
<dd><p>WGS84 semimajor axis in meters</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.WGS84_E2">
<code class="descclassname">wavetrace.constants.</code><code class="descname">WGS84_E2</code><em class="property"> = 0.0066943799901413165</em><a class="headerlink" href="#wavetrace.constants.WGS84_E2" title="Permalink to this definition">¶</a></dt>
<dd><p>WGS84 eccentricity squared (e^2)</p>
</dd></dl>

<dl class="data">
<dt id="wavetrace.constants.WGS84_F">
<code class="descclassname">wavetrace.constants.</code><code class="descname">WGS84_F</code><em class="property"> = 0.0033528106647474805</em><a class="headerlink" href="#wavetrace.constants.WGS84_F" title="Permalink to this definition">¶</a></dt>
<dd><p>WGS84 flattening</p>
</dd></dl>

</div>
<div class="section" id="cli-module">
<h3>cli Module<a class="headerlink" href="#cli-module" title="Permalink to this headline">¶</a></h3>
<p>Sphinx auto-documentation does not work on this module, because all the functions inside are decorated by Click decorators, which don&#8217;t play nicely with Sphinx.
So use the command line to access the documentation for Wavey, the command line interface for Wavetrace:</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>wavey --help
Usage: wavey <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...

Options:
  --help  Show this message and exit.

Commands:
  compute_coverage       Compute radio signal coverage reports
  compute_satellite_los  Compute satellite line-of-sight
  download_topography    Download topography data <span class="o">(</span>SRTM<span class="o">)</span>
  process_topography     Process topography data <span class="o">(</span>SRTM<span class="o">)</span>
  process_transmitters   Process transmitter data <span class="o">(</span>CSV<span class="o">)</span>
  get_covering_tiles_ids        Compute SRTM tiles IDs needed
  srtm_nz                List the SRTM tiles that cover New Zealand
</pre></div>
</div>
<span class="target" id="module-wavetrace.cli"></span></div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html#document-index">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-introduction">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#further-reading">Further Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#authors">Authors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-package">wavetrace Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wavetrace.main">main Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wavetrace.utilities">utilities Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wavetrace.constants">constants Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cli-module">cli Module</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html#document-index">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Alex Raichev.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>